/**
 * System Boundary Nodes (Input/Output)
 */

import type { MechanisticNode } from '../types';

export const boundaryNodes: MechanisticNode[] = [
  // Input Boundaries (Unexplained Causes)
  {
    id: 'aging',
    label: 'Aging',
    category: 'BOUNDARY',
    subtype: 'Lifestyle',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    description: 'Chronological age; drives multiple pathways',
    mechanism: 'Drives C1q↑, iron accumulation, DIM infiltration, meningeal lymphatic decline',
    defaultVariant: 'age_65_74',
    variants: [
      {
        id: 'age_under_65',
        label: '<65 years',
        effectDirection: 'protective',
        effectMagnitude: 0.3,
        effectDescription: 'Early-onset rare; usually genetic causes (APP, PSEN1/2)',
        color: '#34d399',
        evidence: [{ pmid: '23571587', oddsRatio: 0.02, population: 'Global' }],
      },
      {
        id: 'age_65_74',
        label: '65-74 years',
        effectDirection: 'neutral',
        effectMagnitude: 1.0,
        effectDescription: 'Reference age group; ~5% prevalence',
        color: '#787473',
        evidence: [{ pmid: '23571587', oddsRatio: 1.0, population: 'Global' }],
      },
      {
        id: 'age_75_84',
        label: '75-84 years',
        effectDirection: 'risk',
        effectMagnitude: 3.0,
        effectDescription: 'Prevalence ~15%; iron↑, C1q↑, glymphatic↓',
        color: '#E5AF19',
        evidence: [{ pmid: '23571587', oddsRatio: 3.0, population: 'Global' }],
      },
      {
        id: 'age_85_plus',
        label: '85+ years',
        effectDirection: 'risk',
        effectMagnitude: 8.0,
        effectDescription: 'Prevalence ~30-50%; widespread neuropathology common',
        color: '#c75146',
        evidence: [{ pmid: '23571587', oddsRatio: 8.0, population: 'Global' }],
      },
    ],
  },
  {
    id: 'apoe_genotype',
    label: 'APOE Genotype',
    category: 'BOUNDARY',
    subtype: 'GeneticVariant',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    references: { gene: 'HGNC:613' },
    description: 'Apolipoprotein E genetic variants',
    mechanism: 'Major genetic risk factor for late-onset AD',
    defaultVariant: 'apoe3',
    variants: [
      {
        id: 'apoe2',
        label: 'APOE ε2',
        frequency: 0.08,
        effectDirection: 'protective',
        effectMagnitude: 0.6,
        effectDescription: 'Protective against AD; better Aβ clearance, reduced tau pathology',
        color: '#34d399',
        evidence: [
          {
            pmid: '23571587',
            oddsRatio: 0.6,
            confidenceInterval: [0.5, 0.7],
            population: 'European',
          },
        ],
      },
      {
        id: 'apoe3',
        label: 'APOE ε3',
        frequency: 0.78,
        effectDirection: 'neutral',
        effectMagnitude: 1.0,
        effectDescription: 'Reference allele; most common in population',
        color: '#787473',
        evidence: [
          {
            pmid: '23571587',
            oddsRatio: 1.0,
            population: 'European',
          },
        ],
      },
      {
        id: 'apoe4_het',
        label: 'APOE ε4 (1 copy)',
        frequency: 0.14,
        effectDirection: 'risk',
        effectMagnitude: 3.2,
        effectDescription: 'Single ε4 allele: ~3x AD risk; impaired lipidation, Aβ clearance',
        color: '#E5AF19',
        evidence: [
          {
            pmid: '23571587',
            oddsRatio: 3.2,
            confidenceInterval: [2.8, 3.8],
            population: 'European',
          },
        ],
      },
      {
        id: 'apoe4_hom',
        label: 'APOE ε4/ε4',
        frequency: 0.02,
        effectDirection: 'risk',
        effectMagnitude: 12.0,
        effectDescription: 'Homozygous ε4: ~12x AD risk; severe lipid dysfunction, early onset',
        color: '#c75146',
        evidence: [
          {
            pmid: '23571587',
            oddsRatio: 12.0,
            confidenceInterval: [8.0, 18.0],
            population: 'European',
          },
        ],
      },
    ],
  },
  {
    id: 'trem2_variants',
    label: 'TREM2 Variants',
    category: 'BOUNDARY',
    subtype: 'GeneticVariant',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    references: { gene: 'HGNC:17760' },
    description: 'R47H, R62H, other risk variants',
    mechanism: '~3x AD risk; hypomorphic function',
    defaultVariant: 'trem2_common',
    variants: [
      {
        id: 'trem2_common',
        label: 'Common (WT)',
        frequency: 0.98,
        effectDirection: 'neutral',
        effectMagnitude: 1.0,
        effectDescription: 'Wild-type TREM2; normal microglial function',
        color: '#787473',
        evidence: [{ pmid: '23150908', oddsRatio: 1.0, population: 'European' }],
      },
      {
        id: 'trem2_r47h',
        label: 'R47H',
        frequency: 0.003,
        effectDirection: 'risk',
        effectMagnitude: 2.9,
        effectDescription: 'Impaired ligand binding; reduced phagocytosis, DAM transition blocked',
        color: '#c75146',
        evidence: [
          { pmid: '23150908', oddsRatio: 2.9, confidenceInterval: [2.2, 3.8], population: 'European' },
        ],
      },
      {
        id: 'trem2_r62h',
        label: 'R62H',
        frequency: 0.01,
        effectDirection: 'risk',
        effectMagnitude: 1.7,
        effectDescription: 'Partial loss of function; less severe than R47H',
        color: '#E5AF19',
        evidence: [
          { pmid: '25533203', oddsRatio: 1.7, confidenceInterval: [1.4, 2.0], population: 'European' },
        ],
      },
      {
        id: 'trem2_h157y',
        label: 'H157Y',
        frequency: 0.002,
        effectDirection: 'risk',
        effectMagnitude: 1.5,
        effectDescription: 'Increased TREM2 shedding; reduced surface expression',
        color: '#E5AF19',
        evidence: [
          { pmid: '27570872', oddsRatio: 1.5, confidenceInterval: [1.2, 1.9], population: 'European' },
        ],
      },
    ],
  },
  {
    id: 'familial_ad_mutations',
    label: 'Familial AD Mutations',
    category: 'BOUNDARY',
    subtype: 'GeneticVariant',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    description: 'APP, PSEN1, PSEN2 mutations',
    mechanism: 'Autosomal dominant mutations; deterministic early-onset AD',
  },
  {
    id: 'sex',
    label: 'Biological Sex',
    category: 'BOUNDARY',
    subtype: 'GeneticVariant',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    description: 'XX vs XY chromosomes',
    mechanism: 'Affects iron metabolism, immune responses, hormone levels',
  },
  {
    id: 'sleep_disruption',
    label: 'Sleep Disruption',
    category: 'BOUNDARY',
    subtype: 'Lifestyle',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'input',
    description: 'Chronic sleep disturbance',
    mechanism: 'Reduces glymphatic clearance 50%+',
  },

  // Output Boundaries (Terminal Outcomes)
  {
    id: 'mortality',
    label: 'Mortality',
    category: 'BOUNDARY',
    subtype: 'Diagnosis',
    moduleId: 'BOUNDARY',
    boundaryDirection: 'output',
    description: 'Death; ultimate endpoint',
  },

  // Measured Stocks (Proximal to Output Boundaries - SHARED by many modules)
  {
    id: 'cognitive_score',
    label: 'Cognitive Score',
    category: 'STOCK',
    subtype: 'MetaboliteSignal',
    moduleId: 'BOUNDARY',
    sharedWith: ['M06', 'M07', 'M08', 'M13', 'M17'], // Amyloid, Tau, Complement, Cholinergic, AS01
    description: 'Psychometric assessment of cognition - primary clinical endpoint',
    units: 'MMSE (0-30), ADAS-Cog (0-70), CDR-SB (0-18), MoCA (0-30)',
    roles: ['BIOMARKER'],
  },
  {
    id: 'synapses',
    label: 'Synapse Density',
    category: 'STOCK',
    subtype: 'OrganellePool',
    moduleId: 'BOUNDARY',
    sharedWith: ['M06', 'M08'], // Amyloid (LTP), Complement (pruning)
    references: { process: 'GO:0045202' },
    description: 'Synapse density in cortex/hippocampus - strongest correlate of cognition',
    units: 'Stereology count, synaptophysin IHC',
    roles: ['BIOMARKER'],
  },
  {
    id: 'neuronal_count',
    label: 'Neuron Count',
    category: 'STOCK',
    subtype: 'CellPopulation',
    moduleId: 'BOUNDARY',
    references: { cellType: 'CL:0000540' },
    description: 'Neuron number in affected regions',
    units: 'Stereology, NeuN+ counts',
    roles: ['BIOMARKER'],
  },
  {
    id: 'brain_volume',
    label: 'Brain Volume',
    category: 'STOCK',
    subtype: 'CompartmentState',
    moduleId: 'BOUNDARY',
    references: { anatomy: 'UBERON:0000955' },
    description: 'Regional brain volumes',
    units: 'MRI volumetrics (hippocampus, entorhinal cortex)',
    roles: ['BIOMARKER'],
  },
  {
    id: 'csf_biomarkers',
    label: 'CSF Biomarkers',
    category: 'STOCK',
    subtype: 'MetaboliteSignal',
    moduleId: 'BOUNDARY',
    description: 'Fluid biomarkers',
    units: 'Aβ42 pg/mL, pTau181 pg/mL, NfL pg/mL, sTREM2 pg/mL',
    roles: ['BIOMARKER'],
  },
];
